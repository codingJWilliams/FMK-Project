<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>FMK - Starting game</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">
    <script defer src="https://use.fontawesome.com/releases/v5.0.0/js/all.js"></script>
</head>

<body>
    <section class="section">
        <div class="container">
            <h1 class="title is-1">
                Add names
            </h1>
            <p class="subtitle">
                You need to add names so we can give you and your friends options
            </p>
            <p>
                <strong id="hd">Names (0):</strong>
                <span id="names"></span>
            </p>
            <br>
            <div class="field">
                <p class="control has-icons-left">
                    <input class="input" id="namebox" type="text" placeholder="Name">
                    <span class="icon is-small is-left">
                        <i class="fas fa-plus"></i>
                      </span>
                </p>
            </div>
            <div class="field">
                <p class="control">
                    <button class="button is-success" id="addbutton">
                        Add
                      </button>
                </p>
            </div>
            <a class="button is-primary is-large" style="display:none;" id="cont">Continue ➡️</a>
        </div>
    </section>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script>
        $("#cont").click(function() {
            var namesArr = [];
            var names = $("#names").children();
            names.each(function(i, elem) {
                var nameClean = elem.textContent;
                namesArr.push(nameClean);
            })
            window.location.replace("/startgame/2/" + btoa(JSON.stringify(namesArr)));
        })
        $("#addbutton").click(function() {
            var inp = $("#namebox").val();
            if (!inp) return;
            console.log("Is new")
            $("#names").append("<span><br>" + inp + "</span>")
            $("#hd").text("Names (" + $("#names").children().length + ")")
            if ($("#names").children().length == 3) {
                console.log("hi?")
                $("#cont").fadeIn(300);
            }
        })
    </script>
</body>

</html>